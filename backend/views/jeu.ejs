<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Broke Influencer : Clicker Edition</title>
    </head>
    <body>
        <div id="stats">
            <h2>Joueur : <span id="display_login"></span></h2>
            <p>Likes : <span id="display_likes"></span></p>
            <p>Abonnés : <span id="display_abonnes"></span></p>
            <p>Click par seconde : <span id="display_cps"></span></p>
            <p>Multiplicateur : <span id="display_multi"></span></p>
        </div>
        <button id="like_button" onclick="addLike()">Like</button>
        <button id="home_button" onclick="showDiv('home_div')">Accueil</button>
        <button id="market_button" onclick="showDiv('market_div')">Magasin</button>
        <button id="dm_button" onclick="showDiv('dm_div')">Messagerie</button>
        <button id="disconnect_button" onclick="disconnect()">Déconnexion</button>

        <div id="home_div" style="display:block;">
            <h2>Accueil</h2>
            <h3>Menu de publication</h3>
            <div id="random_posts_menu" style="margin-bottom: 20px;"></div>
            <h3>Mes Posts Publiés</h3>
            <div id="posts_container">
                <% if (posts && posts.length > 0) { %>
                    <% posts.forEach(function(post) { %>
                        <div class="post-item" style="border: 1px solid #ccc; margin: 10px; padding: 15px; border-radius: 5px;">
                            <% if (post.imagePost) { %>
                                <img src="<%= post.imagePost %>" alt="Image du post" style="max-width: 300px; display: block; margin-bottom: 10px;">
                            <% } %>
                            <p><strong>Contenu:</strong> <%= post.contenuPost %></p>
                            <p><strong>Gain Likes:</strong> +<%= post.gainLike %> likes</p>
                            <p><strong>Gain Abonnés:</strong> +<%= post.gainAbonné %> abonnés</p>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p>Vous n'avez pas encore publié de posts. Visitez le magasin pour acheter des posts!</p>
                <% } %>
            </div>
        </div>
        <div id="market_div" style="display:none;">
            <h2>Magasin</h2>
            <div id="items_container">
                <!-- Les items du magasin seront chargés ici dynamiquement -->
                <list-items>
                    <item>
                        <h3>Exemple Item 1</h3>
                        <p>Prix : 100 $</p>
                        <button class="buy_button">Acheter</button>
                    </item>
                    <item>
                        <h3>Exemple Item 2</h3>
                        <p>Prix : 200 $</p>
                        <button class="buy_button">Acheter</button>
                    </item>
                </list-items>
            </div>
        </div>
        <div id="dm_div" style="display:none;">
            <h2>Messagerie Privée</h2>
            <!-- Les collaborations seront chargées ici dynamiquement -->
            <div id="collaborations_container">
            <list-items>
                <item>
                        <h3>Exemple message 1</h3>
                        <button class="collab_button">Acheter</button>
                    </item>
                    <item>
                        <h3>Exemple message 2</h3>
                        <button class="collab_button">Acheter</button>
                    </item>
                </list-items>
            </div>
        </div>
    </body>
    <footer>
        <script src="assets/js/jquery.min.js"></script>
        <script>
            // Récupération des données de session dans des variables JavaScript globales
            var login = "<%= login %>";
            var likes = <%= likes %>;
            var abonnes = <%= abonnes %>;
            var clickParSeconde = <%= clickParSeconde %>;
            var multiplicateurClick = <%= multiplicateurClick %>;
        </script>
        <script src="assets/js/jeu.js"></script>
        <script src="assets/js/disconnect.js"></script>

    </footer>
</html>